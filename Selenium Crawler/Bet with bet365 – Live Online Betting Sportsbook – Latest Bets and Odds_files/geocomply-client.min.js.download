var ns_geocomplymodule_compiled = {};!function(a,b){'use strict';'undefined'!=typeof module&&module.exports?module.exports=b():'function'==typeof define&&define.amd?define('GeoComply',b):window.ns_geocomplymodule_compiled.geocomply=b()}(0,function(){var a={};if(Object.defineProperty)try{Object.defineProperty({},'test',{get:function(){return!0}})}catch(b){a=document}return a.Client=function(){function b(a,b){if(a=a.toLowerCase(),void 0!==qa[a]&&'function'==typeof b)if('function'==typeof qa[a]){var c=qa[a];qa[a]=function(){c.apply(this,arguments),b.apply(this,arguments)}}else qa[a]=function(){b.apply(this,arguments)};return this}function c(a){return a=(a||'').toLowerCase(),''===a?qa={connect:null,geolocation:null,error:null,log:null}:void 0!==qa[a]&&'function'==typeof qa[a]&&(qa[a]=null),this}function d(a){if(a=a.toLowerCase(),void 0!==qa[a]&&'function'==typeof qa[a]){var b=arguments;b=Array.prototype.slice.call(b),b.shift(),window.setTimeout(function(){qa[a].apply(this,b)},0)}}function e(){return void 0!==a.Client.debug&&a.Client.debug}function f(){return!e()||void 0===a.Client.enableWS||a.Client.enableWS}function g(){return!!e()&&void 0!==a.Client.forceWSFail&&a.Client.forceWSFail}function h(a,b){for(var c=[],d=0;d<a.length;d++)a[d]!==b&&c.push(a[d]);return c}function i(a){var b,c=!0;for(var e in a)void 0!==(b=a[e])&&''!==b.trim()||(d('error',W,'Connect method is missing required parameter '+e+'.  Please specify it and try again'),c=!1);return c}function j(a,b,c,d){for(var e,f=0,g=[],h=0,i=[],j=(function(){var a=new XMLHttpRequest;return'withCredentials'in a||(a='undefined'==typeof XDomainRequest?null:new XDomainRequest),a}),k=function(){f++,(window.XDomainRequest&&this instanceof XDomainRequest||200===this.status&&this.getResponseHeader('PLC-Installed-Versions'))&&(e=parseInt(this.requestPort),g=window.XDomainRequest&&this instanceof XDomainRequest?this.responseText.split(','):g.concat(this.getResponseHeader('PLC-Installed-Versions').split(','))),'function'!=typeof d||f!==b.length&&!e||window.setTimeout(function(){d(e,g,h,i)},0)},l=function(){f++,h++,i.push(parseInt(this.requestPort)),'function'!=typeof d||f!==b.length||e||window.setTimeout(function(){d(e,g,h,i)},0)},m=function(){f++,'function'!=typeof d||f!==b.length||e||window.setTimeout(function(){d(e,g,h,i)},0)},n=0;n<b.length;n++)!function(b){var d=j();d.onload=k,d.onerror=l,d.ontimeout=m,d.requestUrl=a+':'+b+'/check?t='+(new Date).getTime(),d.requestPort=b,d.open(window.XDomainRequest&&d instanceof XDomainRequest?'GET':'HEAD',d.requestUrl),d.timeout=c,d.send()}(b[n])}function k(){0===ca?j('https://wss.plc-gc.com',ba,1e3,function(a,b,c,e){if(ha||(la.license=void 0,la.userID=void 0,la.geolocationReason=void 0,la.userPhoneNumber=void 0,na={}),a||c){if(a&&-1===b.indexOf(Y)){if(!Z||Z===Y)return void d('error',V,'Local service is installed but no supported version detected.');if(-1===b.indexOf(Z))return void d('error',V,'Local service is installed but no supported version detected.');Y=Z}da=a?[a]:e||ba,l(da)}else ha?(ca=0,ka&&(ka=!1,d('error',U,'An error occurred while posting data to a local service, WebSocket was closed while attempt to reconnect during geolocation'))):d('error',T,'Cannot connect to local service, PLC has not responded on specified ports')}):da.length>ca?l(da):d('error',T,'Cannot connect to local service, PLC was not detected on any of available ports')}function l(a){if('wss'===aa){var b=g()?a[ca]+10:a[ca];try{O=new WebSocket(aa+'://wss.plc-gc.com:'+b),Q=window.setTimeout(function(){window.setTimeout(function(){window.clearTimeout(Q),ga||void 0===O||O.close()},0)},pa)}catch(a){}}O?(O.onmessage=function(a){e()&&d('log','Response received: '+a.data);try{J(JSON.parse(a.data))}catch(a){d('error',U,'Could not parse a response from a local service ('+a+')')}},O.onopen=function(){window.clearTimeout(Q),e()&&d('log','Connection established. Sending handshake...'),o({handshake_req:{version:Y,browser:ra.name+' '+ra.version,js_lib_version:X,installer_key:M,env:N}})},O.onclose=function(){window.clearTimeout(Q),window.clearInterval(P),ga?(ga=!1,ia?(ia=!1,ka=!1,ha=!1,_='',O=void 0,aa='wss'):''===_?(O=void 0,k()):(ha=!0,O=void 0,ka&&(ka=!1,d('error',U,'An error occurred while posting data to a local service, WebSocket was closed unexpectedly during geolocation')))):a.length-1>ca?(ca++,O=void 0,k()):ha?(ca=0,ka&&(ka=!1,d('error',U,'An error occurred while posting data to a local service, WebSocket was closed while attempt to reconnect during geolocation'))):(O=void 0,d('error',T,'Cannot connect to local service, PLC has not responded on specified ports'))}):(ca++,O=void 0,k())}function m(a,b,c){if(i({installerKey:a,environmentId:b})){if(-1===$.indexOf(b))return void d('error',W,'Parameter environmentId has wrong value. Please try again with one of the allowed values');M=a,N=b,Y=void 0===c?Y:c,ca=0,ga&&(e()&&d('log','Already connected. Disconnecting...'),n()),d('log','Connecting...'),ea&&f()?(e()&&d('log','Connect using WebSockets...'),k()):(e()&&d('log','WebSockets are unsupported.'),d('error',T,'Cannot connect to local service, WebSockets are not supported'))}}function n(){window.clearInterval(P),P=void 0,void 0!==O&&(O.readyState<2||4===O.readyState)?(ia=!0,O.close()):(ia=!1,ka=!1,ha=!1,O=void 0,aa='wss')}function o(a){var b=JSON.stringify(a);e()&&d('log','Posting data to socket : '+b);try{O.send(b)}catch(a){ka=!1,d('error',U,'An error occurred while posting data to a local service, error during sending data through WebSocket')}}function p(){return _}function q(){return X}function r(){return Z}function s(a){return la.license!==a&&(la.license=a,-1===ma.indexOf('license')&&ma.push('license')),this}function t(){return la.license}function u(a){return la.userID!==a&&(la.userID=a,-1===ma.indexOf('user_id')&&ma.push('user_id')),this}function v(){return la.userID}function w(a){return la.geolocationReason!==a&&(la.geolocationReason=a,-1===ma.indexOf('geolocation_reason')&&ma.push('geolocation_reason')),this}function x(){return la.geolocationReason}function y(a){return la.userPhoneNumber!==a&&(la.userPhoneNumber=a,-1===ma.indexOf('user_phone_number')&&ma.push('user_phone_number')),this}function z(){return la.userPhoneNumber}function A(){return ja}function B(){ka&&e()&&d('log','Geolocation already requested'),ka=!0,ga?I():ha?(e()&&d('log','Reconnecting...'),k()):(ka=!1,d('error',U,'An error occurred while posting data to a local service, attempt to send data without being previously connected'))}function C(){return ga||ha}function D(a,b){return na[a]!==b&&(na[a]=b,-1===oa.indexOf(a)&&oa.push(a)),this}function E(a){return a in na?na[a]:void 0}function F(a){return D(a,void 0),this}function G(){return oa=['#clear#'],na={},this}function H(a,b,c){o({execute_command:{session:fa,command:a,params:b,values:c}})}function I(){if(!ha&&ka&&0===ma.length&&0===oa.length)return void H('REQUEST_GEOLOCATION',[],[]);var a={license:['SET_LICENSE','license'],user_id:['SET_USER_ID','userID'],geolocation_reason:['SET_GEOLOCATION_REASON','geolocationReason'],user_phone_number:['SET_USER_PHONE_NUMBER','userPhoneNumber']};if(ha){for(var b in a)-1===ma.indexOf(b)&&void 0!==la[a[b][1]]&&ma.push(b);for(var c in na)-1===oa.indexOf(c)&&oa.push(c)}if(ma.length)return void H(a[ma[0]][0],[ma[0]],[la[a[ma[0]][1]]]);if(oa.length){var d=oa[0],e=na[d];'#clear#'===d?H('CLEAR_CUSTOM_FIELDS',[],[]):na.hasOwnProperty(d)&&(void 0===e?H('REMOVE_CUSTOM_FIELD',['key'],[d]):H('SET_CUSTOM_FIELD',['key','value'],[d,e]))}}function J(a){var b;if(a.handshake_resp)b=a.handshake_resp,ja=b.lastErrorCode,ga='0'===b.lastErrorCode,ga&&'true'===b.is_supported?(fa=b.session,_=b.version,D('own','plugin'),'wss'===aa&&(P&&clearInterval(P),P=window.setInterval(function(){e()&&d('log','Keep alive message sent'),o({async_event:{session:fa,event:'EVENT_ON_KEEP_ALIVE',params:[],values:[]}})},2e4)),ha?(ka&&I(),ha=!1):d('connect')):'false'===b.is_supported&&(Z&&Z!==Y?Y=Z:(n(),d('error',V,'Local service is installed but no supported version detected.')));else if(a.execute_command)switch(b=a.execute_command,ja=b.lastErrorCode,b.command){case'SET_LICENSE':'true'===b.result?(ma=h(ma,'license'),I()):(ka=!1,d('error',S,'Invalid license format'));break;case'SET_USER_ID':'true'===b.result?(ma=h(ma,'user_id'),I()):(ka=!1,d('error',R,'Error setting user id'));break;case'SET_GEOLOCATION_REASON':'true'===b.result?(ma=h(ma,'geolocation_reason'),I()):(ka=!1,d('error',R,'Error setting geolocation reason'));break;case'SET_USER_PHONE_NUMBER':'true'===b.result?(ma=h(ma,'user_phone_number'),I()):(ka=!1,d('error',R,'Error setting user phone number'));break;case'SET_CUSTOM_FIELD':'own'===b.values[0]||'true'===b.result?(oa=h(oa,b.values[0]),I()):(ka=!1,d('error',R,'Error setting custom field "'+b.values[0]+'"'));break;case'REMOVE_CUSTOM_FIELD':'true'===b.result?(oa=h(oa,b.values[0]),I()):(ka=!1,d('error',R,'Error removing custom field'));break;case'CLEAR_CUSTOM_FIELDS':'true'===b.result?(oa=h(oa,'#clear#'),I()):(ka=!1,d('error',R,'Error clearing custom fields'));break;case'GET_USER_ID':'true'===b.result&&(la.userID=b.result);break;case'GET_GEOLOCATION_REASON':'true'===b.result&&(la.geolocationReason=b.result);break;case'GET_USER_PHONE_NUMBER':'true'===b.result&&(la.userPhoneNumber=b.result);break;case'GET_CUSTOM_FIELD':b.result.length>0&&D(b.values[0],b.result);break;case'REQUEST_GEOLOCATION':'false'===b.result&&(ka=!1,d('error',b.lastErrorCode,'Couldn\'t request a geolocation.'));break;case'GET_VERSION':'true'===b.result&&(_=b.result);break;case'GET_LAST_ERROR_CODE':'true'===b.result&&(ja=b.result)}else if(a.async_event)switch(b=a.async_event,ja=b.lastErrorCode,b.event){case'EVENT_ON_GEOLOCATION_AVAILABLE':ka=!1,d('geolocation',b.values[0]);break;case'EVENT_ON_GEOLOCATION_FAILED':var c=0,f=1;b.params&&(c=b.params.indexOf('errorCode'),f=b.params.indexOf('errorMessage')),ka=!1,d('error',b.values[c],b.values[f])}}function K(){switch(aa){case'wss':return'Secure WebSocket'}}function L(a,b){j('https://wss.plc-gc.com',ba,a,function(a,c){b(a,c)})}var M,N,O,P,Q,R=600,S=606,T=612,U=613,V=615,W=699,X='3.1.1.3',Y='3.1.1.3',Z='',$=['production','staging','qat','test','dev'],_='',aa='wss',ba=[9703,9704,9705],ca=0,da=[],ea='WebSocket'in window&&2===window.WebSocket.CLOSING,fa='',ga=!1,ha=!1,ia=!1,ja=0,ka=!1,la={license:void 0,userID:void 0,geolocationReason:void 0,userPhoneNumber:void 0},ma=[],na={},oa=[],pa=2e3,qa={connect:null,geolocation:null,error:null,log:null},ra=function(){function a(a){function b(b){var c=a.match(b);return c&&c.length>1&&c[1]||''}var c,d=b(/(ipod|iphone|ipad)/i).toLowerCase(),e=/like android/i.test(a),f=!e&&/android/i.test(a),h=/nexus\s*[0-6]\s*/i.test(a),i=!h&&/nexus\s*[0-9]+/i.test(a),j=/CrOS/.test(a),k=/silk/i.test(a),l=/sailfish/i.test(a),m=/tizen/i.test(a),n=/(web|hpw)os/i.test(a),o=/windows phone/i.test(a),p=(/SamsungBrowser/i.test(a),!o&&/windows/i.test(a)),q=!d&&!k&&/macintosh/i.test(a),r=!f&&!l&&!m&&!n&&/linux/i.test(a),s=b(/edge\/(\d+(\.\d+)?)/i),t=b(/version\/(\d+(\.\d+)?)/i),u=/tablet/i.test(a),v=!u&&/[^-]mobi/i.test(a),w=/xbox/i.test(a);/opera/i.test(a)?c={name:'Opera',opera:g,version:t||b(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(a)?c={name:'Opera',opera:g,version:b(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||t}:/SamsungBrowser/i.test(a)?c={name:'Samsung Internet for Android',samsungBrowser:g,version:t||b(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(a)?c={name:'Opera Coast',coast:g,version:t||b(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(a)?c={name:'Yandex Browser',yandexbrowser:g,version:t||b(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(a)?c={name:'UC Browser',ucbrowser:g,version:b(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(a)?c={name:'Maxthon',maxthon:g,version:b(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(a)?c={name:'Epiphany',epiphany:g,version:b(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(a)?c={name:'Puffin',puffin:g,version:b(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(a)?c={name:'Sleipnir',sleipnir:g,version:b(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(a)?c={name:'K-Meleon',kMeleon:g,version:b(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:o?(c={name:'Windows Phone',windowsphone:g},s?(c.msedge=g,c.version=s):(c.msie=g,c.version=b(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(a)?c={name:'Internet Explorer',msie:g,version:b(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:j?c={name:'Chrome',chromeos:g,chromeBook:g,chrome:g,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(a)?c={name:'Microsoft Edge',msedge:g,version:s}:/vivaldi/i.test(a)?c={name:'Vivaldi',vivaldi:g,version:b(/vivaldi\/(\d+(\.\d+)?)/i)||t}:l?c={name:'Sailfish',sailfish:g,version:b(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(a)?c={name:'SeaMonkey',seamonkey:g,version:b(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(a)?(c={name:'Firefox',firefox:g,version:b(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(a)&&(c.firefoxos=g)):k?c={name:'Amazon Silk',silk:g,version:b(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(a)?c={name:'PhantomJS',phantom:g,version:b(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(a)?c={name:'SlimerJS',slimer:g,version:b(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(a)||/rim\stablet/i.test(a)?c={name:'BlackBerry',blackberry:g,version:t||b(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:n?(c={name:'WebOS',webos:g,version:t||b(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(a)&&(c.touchpad=g)):/bada/i.test(a)?c={name:'Bada',bada:g,version:b(/dolfin\/(\d+(\.\d+)?)/i)}:m?c={name:'Tizen',tizen:g,version:b(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||t}:/qupzilla/i.test(a)?c={name:'QupZilla',qupzilla:g,version:b(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||t}:/chromium/i.test(a)?c={name:'Chromium',chromium:g,version:b(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||t}:/chrome|crios|crmo/i.test(a)?c={name:'Chrome',chrome:g,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:f?c={name:'Android',version:t}:/safari|applewebkit/i.test(a)?(c={name:'Safari',safari:g},t&&(c.version=t)):d?(c={name:'iphone'==d?'iPhone':'ipad'==d?'iPad':'iPod'},t&&(c.version=t)):c=/googlebot/i.test(a)?{name:'Googlebot',googlebot:g,version:b(/googlebot\/(\d+(\.\d+))/i)||t}:{name:b(/^(.*)\/(.*) /),version:function x(b){var c=a.match(b);return c&&c.length>1&&c[2]||''}(/^(.*)\/(.*) /)},!c.msedge&&/(apple)?webkit/i.test(a)?(/(apple)?webkit\/537\.36/i.test(a)?(c.name=c.name||'Blink',c.blink=g):(c.name=c.name||'Webkit',c.webkit=g),!c.version&&t&&(c.version=t)):!c.opera&&/gecko\//i.test(a)&&(c.name=c.name||'Gecko',c.gecko=g,c.version=c.version||b(/gecko\/(\d+(\.\d+)?)/i)),c.windowsphone||c.msedge||!f&&!c.silk?c.windowsphone||c.msedge||!d?q?c.mac=g:w?c.xbox=g:p?c.windows=g:r&&(c.linux=g):(c[d]=g,c.ios=g):c.android=g;var y='';c.windowsphone?y=b(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):d?(y=b(/os (\d+([_\s]\d+)*) like mac os x/i),y=y.replace(/[_\s]/g,'.')):f?y=b(/android[ \/-](\d+(\.\d+)*)/i):c.webos?y=b(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):c.blackberry?y=b(/rim\stablet\sos\s(\d+(\.\d+)*)/i):c.bada?y=b(/bada\/(\d+(\.\d+)*)/i):c.tizen&&(y=b(/tizen[\/\s](\d+(\.\d+)*)/i)),y&&(c.osversion=y);var z=y.split('.')[0];return u||i||'ipad'==d||f&&(3==z||z>=4&&!v)||c.silk?c.tablet=g:(v||'iphone'==d||'ipod'==d||f||h||c.blackberry||c.webos||c.bada)&&(c.mobile=g),c.msedge||c.msie&&c.version>=10||c.yandexbrowser&&c.version>=15||c.vivaldi&&c.version>=1||c.chrome&&c.version>=20||c.samsungBrowser&&c.version>=4||c.firefox&&c.version>=20||c.safari&&c.version>=6||c.opera&&c.version>=10||c.ios&&c.osversion&&c.osversion.split('.')[0]>=6||c.blackberry&&c.version>=10.1||c.chromium&&c.version>=20?c.a=g:c.msie&&c.version<10||c.chrome&&c.version<20||c.firefox&&c.version<20||c.safari&&c.version<6||c.opera&&c.version<10||c.ios&&c.osversion&&c.osversion.split('.')[0]<6||c.chromium&&c.version<20?c.c=g:c.x=g,c}function b(a){return a.split('.').length}function c(a,b){var c,d=[];if(Array.prototype.map)return Array.prototype.map.call(a,b);for(c=0;c<a.length;c++)d.push(b(a[c]));return d}function d(a){for(var d=Math.max(b(a[0]),b(a[1])),e=c(a,function(a){var e=d-b(a);return a+=new Array(e+1).join('.0'),c(a.split('.'),function(a){return new Array(20-a.length).join('0')+a}).reverse()});--d>=0;){if(e[0][d]>e[1][d])return 1;if(e[0][d]!==e[1][d])return-1;if(0===d)return 0}}function e(b,c,e){var f=h;'string'==typeof c&&(e=c,c=void 0),void 0===c&&(c=!1),e&&(f=a(e));var g=''+f.version;for(var i in b)if(b.hasOwnProperty(i)&&f[i]){if('string'!=typeof b[i])throw new Error('Browser version in the minVersion map should be a string: '+i+': '+String(b));return d([g,b[i]])<0}return c}function f(a,b,c){return!e(a,b,c)}var g=!0,h=a('undefined'!=typeof navigator?navigator.userAgent||'':'');return h.test=function(a){for(var b=0;b<a.length;++b){var c=a[b];if('string'==typeof c&&c in h)return!0}return!1},h.isUnsupportedBrowser=e,h.compareVersions=d,h.check=f,h._detect=a,h}();return{CLNT_OK:0,CLNT_ERROR_UNEXPECTED:R,CLNT_ERROR_NOT_CERTIFIED_BINARIES:601,CLNT_ERROR_NETWORK_CONNECTION:602,CLNT_ERROR_SERVER_COMMUNICATION:603,CLNT_ERROR_CLIENT_SUSPENDED:604,CLNT_ERROR_DISABLED_SOLUTION:605,CLNT_ERROR_INVALID_LICENSE_FORMAT:S,CLNT_ERROR_CLIENT_LICENSE_UNAUTHORIZED:607,CLNT_ERROR_LICENSE_EXPIRED:608,CLNT_ERROR_INVALID_CUSTOM_FIELDS:609,CLNT_ERROR_LOCAL_SERVICE_UNAVAILABLE:T,CLNT_ERROR_LOCAL_SERVICE_COMMUNICATION:U,CLNT_ERROR_REQUEST_GEOLOCATION_IN_PROGRESS:614,CLNT_ERROR_LOCAL_SERVICE_UNSUP_VER:V,CLNT_ERROR_TRANSACTION_TIMEOUT:620,CLNT_ERROR_WRONG_OR_MISSING_PARAMETER:W,on:function(a,c){return b.call(this,a,c)},off:function(a){return c.call(this,a)},connect:function(){return m.apply(this,arguments)},disconnect:function(){n.call(this)},getVersion:function(){return p.call(this)},getJSLibraryVersion:function(){return q.call(this)},getFallbackVersion:function(){return r.call(this)},requestGeolocation:function(){B.call(this)},getLastErrorCode:function(){return A.call(this)},setLicense:function(a){return s.call(this,a)},getLicense:function(){return t.call(this)},setUserId:function(a){return u.call(this,a)},getUserId:function(){return v.call(this)},setGeolocationReason:function(a){return w.call(this,a)},getGeolocationReason:function(){return x.call(this)},setUserPhoneNumber:function(a){return y.call(this,a)},getUserPhoneNumber:function(){return z.call(this)},customFields:{set:function(a,b){return D.call(this,a,b)},get:function(a){return E.call(this,a)},remove:function(a){return F.call(this,a)},clear:function(){return G.call(this)}},isConnected:function(){return C.call(this)},getConnectionMethod:function(){return K.call(this)},detectInstall:function(a,b){L(a,b)}}}(),Object.defineProperties&&Object.defineProperties(a.Client,{CLNT_OK:{value:0,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_UNEXPECTED:{value:600,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_NOT_CERTIFIED_BINARIES:{value:601,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_NETWORK_CONNECTION:{value:602,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_SERVER_COMMUNICATION:{value:603,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_CLIENT_SUSPENDED:{value:604,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_DISABLED_SOLUTION:{value:605,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_INVALID_LICENSE_FORMAT:{value:606,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_CLIENT_LICENSE_UNAUTHORIZED:{value:607,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_LICENSE_EXPIRED:{value:608,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_INVALID_CUSTOM_FIELDS:{value:609,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_LOCAL_SERVICE_UNAVAILABLE:{value:612,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_LOCAL_SERVICE_COMMUNICATION:{value:613,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_REQUEST_GEOLOCATION_IN_PROGRESS:{value:614,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_LOCAL_SERVICE_UNSUP_VER:{value:615,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_TRANSACTION_TIMEOUT:{value:620,writable:!1,enumerable:!0,configurable:!1},CLNT_ERROR_WRONG_OR_MISSING_PARAMETER:{value:699,writable:!1,enumerable:!0,configurable:!1}}),a.Events=function(){function b(a){if(a=a||window.event,a.isFixed)return a;if(a.isFixed=!0,a.preventDefault=a.preventDefault||function(){this.returnValue=!1},a.stopPropagation=a.stopPropagation||function(){this.cancelBubble=!0},a.target||(a.target=a.srcElement),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement),null===a.pageX&&null!==a.clientX){var b=document.documentElement,c=document.body;a.pageX=a.clientX+(b&&b.scrollLeft||c&&c.scrollLeft||0)-(b.clientLeft||0),a.pageY=a.clientY+(b&&b.scrollTop||c&&c.scrollTop||0)-(b.clientTop||0)}return!a.which&&a.button&&(a.which=1&a.button?1:2&a.button?3:4&a.button?2:0),a}function c(c){c=b(c);var e=d('beforeunload'===c.type?window:c.target),f=!1===e?[]:k[e].events[c.type];for(var g in f)!1===f[g].call(a.Events,c)&&(c.preventDefault(),c.stopPropagation())}function d(a){var b=!1;for(var c in k)if(k[c].target===a){b=c;break}return b}function e(b,e,f){b.setInterval&&b!==window&&!b.frameElement&&(b=window),f.guid||(f.guid=++j);var g=d(b);return!1===g&&(g=++i,k[g]={target:b,handle:function(d){if(void 0!==a.Events)return c.call(b,d)},events:[]}),void 0===k[g].events[e]&&(k[g].events[e]={}),b.addEventListener?b.addEventListener(e,k[g].handle,!1):b.attachEvent?b.attachEvent('on'+e,k[g].handle):b['on'+e]=k[g].handle,k[g].events[e][f.guid]=f,a.Events}function f(b,c,e){var f=d(b),g=!1!==f&&k[f].events[c];if(g)return e.guid&&(delete g[e.guid],Object.keys(k[f].events[c]).length||delete k[f].events[c],b.removeEventListener?b.removeEventListener(c,g[e.guid],!1):b.detachEvent?b.detachEvent('on'+c,g[e.guid]):delete b['on'+c]),a.Events}function g(b,c){if(document.createEvent){var d=document.createEvent('click'===c?'MouseEvents':'Event');'click'===c?d.initMouseEvent(c,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null):d.initEvent(c,!0,!1),b.dispatchEvent(d)}else document.createEventObject?b.fireEvent('on'+c):'function'==typeof b['on'+c]&&b['on'+c]();return a.Events}function h(b,c){var d=!1,e=!0,f=b.document,g=f.documentElement,h=f.addEventListener?'addEventListener':'attachEvent',i=f.addEventListener?'removeEventListener':'detachEvent',j=f.addEventListener?'':'on',k=function(a){'readystatechange'===a.type&&'complete'!==f.readyState||(('load'===a.type?b:f)[i](j+a.type,k,!1),!d&&(d=!0)&&c.call(b,a.type||a))},l=function(){try{g.doScroll('left')}catch(a){return void setTimeout(l,50)}k('poll')};if('complete'===f.readyState)c.call(b,'lazy');else{if(f.createEventObject&&g.doScroll){try{e=!b.frameElement}catch(a){}e&&l()}f[h](j+'DOMContentLoaded',k,!1),f[h](j+'readystatechange',k,!1),b[h](j+'load',k,!1)}return a.Events}var i=0,j=0,k={};return{add:function(a,b,c){return e.call(this,a,b,c)},remove:function(a,b,c){return f.call(this,a,b,c)},trigger:function(a,b){return g.call(this,a,b)},ready:function(a,b){return h.call(this,a,b)}}}(),a.createClient=function(b){return window.console&&a.Client.debug,a.Client.off(),a.Client.disconnect(),a.Client.on('connect',function(){b.onConnectSuccess.call(a.Client)}).on('geolocation',function(c){b.onGeolocationAvailable.call(a.Client,c)}).on('error',function(c,d){c===a.Client.CLNT_ERROR_LOCAL_SERVICE_UNAVAILABLE||c===a.Client.CLNT_ERROR_LOCAL_SERVICE_UNSUP_VER?b.onConnectFailed.call(a.Client,c,d):b.onGeolocationFailed.call(a.Client,c,d)}).on('log',function(c){b&&'function'==typeof b.onLog&&b.onLog.call(a.Client,c)}),a.Client.ErrorCodes={CLNT_OK:a.Client.CLNT_OK,CLNT_ERROR_UNEXPECTED:a.Client.CLNT_ERROR_UNEXPECTED,CLNT_ERROR_NOT_CERTIFIED_BINARIES:a.Client.CLNT_ERROR_NOT_CERTIFIED_BINARIES,CLNT_ERROR_NETWORK_CONNECTION:a.Client.CLNT_ERROR_NETWORK_CONNECTION,CLNT_ERROR_SERVER_COMMUNICATION:a.Client.CLNT_ERROR_SERVER_COMMUNICATION,CLNT_ERROR_CLIENT_SUSPENDED:a.Client.CLNT_ERROR_CLIENT_SUSPENDED,CLNT_ERROR_DISABLED_SOLUTION:a.Client.CLNT_ERROR_DISABLED_SOLUTION,CLNT_ERROR_INVALID_LICENSE_FORMAT:a.Client.CLNT_ERROR_INVALID_LICENSE_FORMAT,CLNT_ERROR_CLIENT_LICENSE_UNAUTHORIZED:a.Client.CLNT_ERROR_CLIENT_LICENSE_UNAUTHORIZED,CLNT_ERROR_LICENSE_EXPIRED:a.Client.CLNT_ERROR_LICENSE_EXPIRED,CLNT_ERROR_INVALID_CUSTOM_FIELDS:a.Client.CLNT_ERROR_INVALID_CUSTOM_FIELDS,CLNT_ERROR_LOCAL_SERVICE_UNAVAILABLE:a.Client.CLNT_ERROR_LOCAL_SERVICE_UNAVAILABLE,CLNT_ERROR_LOCAL_SERVICE_COMMUNICATION:a.Client.CLNT_ERROR_LOCAL_SERVICE_COMMUNICATION,CLNT_ERROR_REQUEST_GEOLOCATION_IN_PROGRESS:a.Client.CLNT_ERROR_REQUEST_GEOLOCATION_IN_PROGRESS,CLNT_ERROR_LOCAL_SERVICE_UNSUP_VER:a.Client.CLNT_ERROR_LOCAL_SERVICE_UNSUP_VER,CLNT_ERROR_TRANSACTION_TIMEOUT:a.Client.CLNT_ERROR_TRANSACTION_TIMEOUT,CLNT_ERROR_WRONG_OR_MISSING_PARAMETER:a.Client.CLNT_ERROR_WRONG_OR_MISSING_PARAMETER},Object&&'function'==typeof Object.freeze&&(a.Client.ErrorCodes=Object.freeze(a.Client.ErrorCodes)),a.Client},a.events=a.Events,Object.defineProperty&&(Object.defineProperty(a,'debug',{set:function(b){window.console,a.Client.debug=b},get:function(){return window.console,a.Client.debug}}),Object.defineProperty(a,'enableWS',{set:function(b){window.console&&a.Client.debug,a.Client.enableWS=b},get:function(){return window.console&&a.Client.debug,a.Client.enableWS}}),Object.defineProperty(a,'forceWSFail',{set:function(b){window.console&&a.Client.debug,a.Client.forceWSFail=b},get:function(){return window.console&&a.Client.debug,a.Client.forceWSFail}})),a});